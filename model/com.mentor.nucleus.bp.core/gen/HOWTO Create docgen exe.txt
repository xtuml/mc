Prepare the model to build docgen
---------------------------------
- Switch to xtUML Modeling Perspective.  
- Delete the "context_menu" and "ooaofooa_heirarchy" domains
- Right click on the com.mentor.nucleus.bp.core project, select 
  "Cleanse for Model Compiler" from the context menu. (NOTE: this step 
  requires that your environment contains at least version 1.0.2 of plug-in 
  com.mentor.nucleus.bp.internal.tools from 
  \\wv\dfs\bridgepoint\engineering_releases\VSx_Dev )
  - Select "Yes" to the question dialog about removing model elements
  - The model will be cleansed.  This removes, operations, functions, MDAs, and
    Body instances and everything associated with them like params, activities,
    etc.  It will leave these activities in DocGen and MC related packages.
- Remove the Local and Runtime Value subsystems.  Note that this will modify the
  Instance subsystem.
** DO NOT CHECK THIS MODIFIED/CLEANSED MODEL IN ON TOP OF THE MC-* BRANCH YOU 
   ARE WORKING IN.


How to build docgen.exe
------------------------
NOTE: You must have source C model compiler already configured.

- Go to Properties->Builders and turn off all builders except for
  the model compiler pre-build and MC-3020 Builder.
- From the C/C++ Projects perspective, find .externalToolBuilders and refresh.
- Edit gen/domain.mark to not exclude any subsystem excludes, comment out all
    .invoke MarkExcludeSubsystemFromCodeGen(...) lines
- If you build now, this will generate the schema.  See additional information 
    about schema creation in HOWTO Create MC-3020 HEAD branch.txt.
- Rename schema_gen.arc to schema_gen.ark.
- Copy folder "/gen/docbook_h" into "src" folder
- Rename folder "/src/docbook_h" to "/src/docbook"
- Build (again), this will do code gen for the whole system.  Scan the Console
    for code generation errors.
- Refresh src/
- Copy com.mentor.nucleus.bp.core_sys_types.h and ooaofooa_classes.h into /gen.
- Open gen/com.mentor.nucleus.bp.core_sys_types.h, replace 3 occurances of 
    "COM.MENTOR.NUCLEUS.BP.CORE_SYS_TYPES_H" with "COM_MENTOR_NUCLEUS_BP_CORE_SYS_TYPES_H"
- Open src/ooaofooa_I_TIM_class.h and add "l_t" as the type of the expiration attribute.
- Edit domain.mark to exclude everything except Document Subsystem (to work with modifying Document).
- Enable CDT Builder and Scanner Configuration Builder in the project Properties
- Build again, this will gen only the Document Subsystem and compile using the
    active CDT build configuration (set via Project > Build Configurations > Set Active > Debug | Release).
    o Output will be <project>/Debug/docgen.exe or <project>/Release/docgen.exe
 
    
    
To build on the command line using cygwin
------------------------------------------
- Open cygwin, navigate to the /src folder:
    To compile for debugging:
    - gcc -g -c *.c
    - gcc *.o
    - should now have a.exe

    To compile only the latest changes in DocGen function package:
    - gcc -g -c ooaofooa_functions.c
    - gcc *.o

    To do a release build:
    - gcc -O2 -mno-cygwin *.c -o docgen.exe



Running DocGen
--------------
- To run DocGen inside Verifier
  o Create src/lib/
  o Copy libsrc/*.java to src/lib/
  o Build the project with the Java Builder only
  o Check out <SVN>/trunk/Models/Test/DocGenTest
  o Create a Model Verifier Application launch configuration for the bp.core project
  o Run this launch config
  o In session explorer, expand bp.core/ooaofooa/DocGen
  o Execute docgen_load_project
  o Execute docgen
  o doc.xml will be created in the gen/ folder of the project
  
  NOTE: You can use other models, but they must be a sibling to the bp.core 
        project in the workspace and they must be (re)named DocGenTest or you 
        must modify docgen_load_project for the model name you want to use.
  NOTE2: doc.xml is appended to each time docgen is run.  You must manually
         delete it between runs.
               
- If you need to run docgen.exe by hand for testing, build your sample model
  with MC3020, this will give you gen/code_generation/_system.sql
  o To debug with CDT inside eclipse, copy this _system.sql to 
    com.mentor.nucleus.bp.core/a.xtuml, then create a debug launch configuration
    of type C/C++ Application that points to Debug/docgen.exe
  o To run via the command line, copy this _system.sql to a.xtuml as a directory
    sibling of docgen.exe, then just execute ./docgen.exe
